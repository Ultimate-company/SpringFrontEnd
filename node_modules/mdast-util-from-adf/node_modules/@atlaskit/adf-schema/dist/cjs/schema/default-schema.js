"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSchemaBasedOnStage = exports.defaultSchemaConfig = exports.defaultSchema = void 0;

var _nodes = require("./nodes");

var _marks = require("./marks");

var _createSchema = require("./create-schema");

var getDefaultSchemaConfig = function getDefaultSchemaConfig() {
  var defaultSchemaConfig = {
    nodes: ['doc', 'paragraph', 'text', 'bulletList', 'orderedList', 'listItem', 'heading', 'blockquote', 'codeBlock', 'panel', 'rule', 'image', 'caption', 'mention', 'media', 'mediaGroup', 'mediaSingle', 'mediaInline', 'confluenceUnsupportedBlock', 'confluenceUnsupportedInline', 'confluenceJiraIssue', 'expand', 'nestedExpand', 'extension', 'inlineExtension', 'bodiedExtension', 'hardBreak', 'emoji', 'table', 'tableCell', 'tableHeader', 'tableRow', 'decisionList', 'decisionItem', 'taskList', 'taskItem', 'unknownBlock', 'date', 'status', 'placeholder', 'layoutSection', 'layoutColumn', 'inlineCard', 'blockCard', 'embedCard', 'unsupportedBlock', 'unsupportedInline'],
    marks: ['link', 'em', 'strong', 'strike', 'subsup', 'underline', 'code', 'textColor', 'confluenceInlineComment', 'breakout', 'alignment', 'indentation', 'annotation', 'dataConsumer', 'unsupportedMark', 'unsupportedNodeAttribute', 'typeAheadQuery' // https://product-fabric.atlassian.net/browse/ED-10214,
    ]
  };
  return defaultSchemaConfig;
};

var defaultSchemaConfig = getDefaultSchemaConfig();
exports.defaultSchemaConfig = defaultSchemaConfig;

var getSchemaBasedOnStage = function getSchemaBasedOnStage() {
  var stage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'final';
  var defaultSchemaConfig = getDefaultSchemaConfig();

  if (stage === 'stage0') {
    defaultSchemaConfig.customNodeSpecs = {
      layoutSection: _nodes.layoutSectionWithSingleColumn
    };
    defaultSchemaConfig.customMarkSpecs = {
      fragment: _marks.fragment
    };
    defaultSchemaConfig.nodes.push('mediaInline');
  }

  return (0, _createSchema.createSchema)(defaultSchemaConfig);
};

exports.getSchemaBasedOnStage = getSchemaBasedOnStage;
var defaultSchema = getSchemaBasedOnStage();
exports.defaultSchema = defaultSchema;